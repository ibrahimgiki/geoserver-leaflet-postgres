<html>
  <head>
  <script
  src="https://code.jquery.com/jquery-3.6.0.js"
  integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
  crossorigin="anonymous"></script>
   
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
      #map {
        width: 100%;
        height: 500px;
      }
    </style>
	
  </head>
  <body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
	
  </body>
</html>

<script>
var map = L.map("map").setView([34, 72], 10);

var osm = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  attribution:
    '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

var baseLayers = {
		"Streets": osm
	};

var control = new L.control.layers(baseLayers).addTo(map);

var districtName = "district"+'='+"'Peshawar'";


//alert(districtName);

//Geoserver Web Feature Service
$.ajax(
  'http://localhost:8585/geoserver/gishubworkspace/ows', 
  {
  type: 'GET',
  data: {
      service: 'WFS',
      request: 'GetFeature',
      typename: 'gishubworkspace:gbhss',
      srsname: 'EPSG:4326',
      outputFormat: 'text/javascript',

      /*cql_filter: districtName,*/

      cql_filter: "district='D.I.Khan' and tehsil='Daraban' ",

      /*success: function(result){alert(result);}*/
      /*success: function (data, status, xhr) {alert('success');}*/

  },

  dataType: 'jsonp',
  jsonpCallback:'callback:handleJson',
  jsonp:'format_options',

 });




  //Geojson style file
  var myStyle = {
    'color': 'red'
  }
// the ajax callback function
function handleJson(data) {
  
    selectedArea = L.geoJson(data, {
      style: myStyle,
      onEachFeature: function(feature, layer) {
        layer.bindPopup('Name:' + feature.properties.school_nam + " "+ feature.properties.district)
      }
    }).addTo(map);  

	control.addOverlay(selectedArea, 'GBHSS');
  map.fitBounds(selectedArea.getBounds());

}



/*$.ajax('http://localhost:8585/geoserver/gishubworkspace/ows',{
  type: 'GET',
  data: {
    service: 'WFS',
    request: 'GetFeature',
    typename: 'gishubworkspace:gbms',
    srsname: 'EPSG:4326',
    outputFormat: 'text/javascript',
    },
  dataType: 'jsonp',
  jsonpCallback:'callback:handlegbmsJson',
  jsonp:'format_options'
 });
  
  var myStyle = {
    'color': 'red'
  }

function handlegbmsJson(data) {
    selectedArea = L.geoJson(data, {
      style: myStyle,
      onEachFeature: function(feature, layer) {
        layer.bindPopup('Name:' + feature.properties.school_nam)
      }
    }).addTo(map);  
	control.addOverlay(selectedArea, 'GBMS');
  map.fitBounds(selectedArea.getBounds());
}*/
	
</script>
